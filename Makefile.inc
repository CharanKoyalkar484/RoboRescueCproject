QT_LIB_DIR 						= C:/Qt/Qt5.4.2/5.4/mingw491_32/lib
QT_INCL_DIR 					= C:/Qt/Qt5.4.2/5.4/mingw491_32/include
QT_BIN_DIR 						= C:/Qt/Qt5.4.2/5.4/mingw491_32/bin
BOOST_LIB_DIR 					= C:/Boost/boost_1_58_0/stage/lib
BOOST_INCL_DIR 					= C:/Boost/boost_1_58_0

CXX 							= g++
CXXFLAGS						= -std=c++11
LDFLAGS							= -L$(QT_LIB_DIR) -L$(BOOST_LIB_DIR)
INCLUDES 						= -I$(QT_INCL_DIR) -I$(BOOST_INCL_DIR) -IDeps/incl/mavlink
LDLIBS							= -lQt5Core -lQt5Widgets -lQt5Gui
SRC 							= 
UI 								= 
UI_HEADERS						=
MODULES 						=
MOC								= $(QT_BIN_DIR)/moc.exe
UIC								= $(QT_BIN_DIR)/uic.exe

########MODULES########
#GUI
MAIN_GUI_MODULE 				= Src/GUI/mission-gui/
QUADCOPTER_GUI_MODULE 			= Src/GUI/mission-gui/quadcopter-gui/
ATV_GUI_MODULE 					= Src/GUI/mission-gui/ATV-gui/
ROSBEE_GUI_MODULE 				= Src/GUI/mission-gui/rosbee-gui/
LIDAR_GUI_MODULE 				= Src/GUI/mission-gui/lidar-gui/

#VEHICLES
QUADCOPTER_MODULE				= Src/Vehicles/Quadcopter/
ATV_MODULE						= Src/Vehicles/ATV/
ROSBEE_LOCAL_MODULE				= Src/Vehicles/Rosbee/

#SENSORS
PROPELLOR_ENCODER_MODULE 		= Src/Sensors/Propellor-Encoder/
PROPELLOR_SIRC_MODULE			= Src/Sensors/Propellor-SIRC/
PROPELLOR_TEMPERATURE_MODULE 	= Src/Sensors/Propellor-TemperatureSensor/
PROPELLOR_ULTRASONIC_MODULE		= Src/Sensors/Propellor-UltrasonicSensor/
LIDAR_LOCAL_MODULE				= Src/Sensors/lidar/
PX4FLOW_MODULE 					= Src/Sensors/PX4Flow/

#COMMUNICATION
MAVLINK_EXCHANGER_MODULE		= Src/Communication/MavlinkExchanger/
SERIAL_PORT_MODULE				= Src/Communication/SerialPort/

#MISSIONS
MISSION1_MODULE					= Src/Missions/Mission1/

#TARGET MODULES
ROBORESCUE_MISSION1				= $(MISSION1_MODULE) 
ROBORESCUE_MISSION1			   += $(MAIN_GUI_MODULE)
ROBORESCUE_MISSION1			   += $(QUADCOPTER_GUI_MODULE)
ROBORESCUE_MISSION1			   += $(ATV_GUI_MODULE)
ROBORESCUE_MISSION1			   += $(ROSBEE_GUI_MODULE)
ROBORESCUE_MISSION1			   += $(LIDAR_GUI_MODULE)
ROBORESCUE_MISSION1			   += $(QUADCOPTER_MODULE)
ROBORESCUE_MISSION1			   += $(ATV_MODULE)
ROBORESCUE_MISSION1			   += $(MAVLINK_EXCHANGER_MODULE)
ROBORESCUE_MISSION1			   += $(SERIAL_PORT_MODULE)
ROBORESCUE_MISSION1			   += $(ROSBEE_LOCAL_MODULE)
ROBORESCUE_MISSION1			   += $(LIDAR_LOCAL_MODULE)

#LOCALISATION MODULES
ROBORESCUE_LOCALISATION_MODULE  = Src/Sensors/Localisation-Module/Localisation_Basestation/
ROBORESCUE_LOCALISATION_MODULE += $(PX4FLOW_MODULE)




#CLEAN MODULES
CLEAN_MODULES					= $(MISSION1_MODULE) 
CLEAN_MODULES			   		+= $(MAIN_GUI_MODULE)
CLEAN_MODULES			   		+= $(QUADCOPTER_GUI_MODULE)
CLEAN_MODULES			   		+= $(ATV_GUI_MODULE)
CLEAN_MODULES			   		+= $(ROSBEE_GUI_MODULE)
CLEAN_MODULES			   		+= $(LIDAR_GUI_MODULE)
CLEAN_MODULES			   		+= $(QUADCOPTER_MODULE)
CLEAN_MODULES			  		+= $(ATV_MODULE)
CLEAN_MODULES			  		+= $(ROSBEE_LOCAL_MODULE)
CLEAN_MODULES			  		+= $(PROPELLOR_ENCODER_MODULE)
CLEAN_MODULES			  		+= $(PROPELLOR_SIRC_MODULE)
CLEAN_MODULES			  		+= $(PROPELLOR_TEMPERATURE_MODULE)
CLEAN_MODULES			  		+= $(PROPELLOR_ULTRASONIC_MODULE)
CLEAN_MODULES			   		+= $(LIDAR_LOCAL_MODULE)
CLEAN_MODULES			   		+= $(MAVLINK_EXCHANGER_MODULE)
CLEAN_MODULES			   		+= $(SERIAL_PORT_MODULE)
CLEAN_MODULES			   		+= $(MISSION1_MODULE)


ROBORESCUE_LIDAR				=
ROBORESCUE_ROSBEE				=


ifeq ($(MAKECMDGOALS),mission1)
	MODULES += $(ROBORESCUE_MISSION1)
endif
ifeq ($(MAKECMDGOALS),localisationmodule)
	MODULES += $(ROBORESCUE_LOCALISATION_MODULE)
endif
ifeq ($(MAKECMDGOALS),lidar)
	MODULES += $(ROBORESCUE_LIDAR)
endif
ifeq ($(MAKECMDGOALS),rosbee)
	MODULES += $(ROBORESCUE_ROSBEE)
endif

INCLUDES 	+= $(patsubst %, -I%, $(MODULES))
include $(MODULES:=module.mk)
UI_HEADERS 	+= $(UI:.ui=.h)
OBJ 		+= $(SRC:.cpp=.o)

%.d : %.cpp
	$(CXX) $(CXXFLAGS) $(INCLUDES) -MM -MT"$@" $< -MF $@
	
%.o : %.cpp
	$(CXX) $(CXXFLAGS) $(INCLUDES) -o $@ -c $<
	
moc_%.cpp : %.h
	$(MOC) $< -o $@
	
ui_%.h : %.ui
	$(UIC) $< -o $@